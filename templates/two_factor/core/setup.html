{% extends "two_factor/_base_focus.html" %}
{% load i18n %}
{% load static %}

{% block content %}
<div class="ui segment">
  <img class="ui image" style="margin: auto" width="200px" src="">

  <div class="ui huge header">
    {% block title %}{% trans "Enable Two-Factor Authentication" %}{% endblock %}
  </div>

  <div class="ui header">
    <div class="sub header" style="text-align: justify;">
      {% if wizard.steps.current == 'welcome' %}
        {% blocktrans %}You are about to take your account security to the
        next level. Follow the steps in this wizard to enable two-factor
        authentication.{% endblocktrans %}

      {% elif wizard.steps.current == 'method' %}
        {% blocktrans %}Please select which authentication method you would
        like to use.{% endblocktrans %}

      {% elif wizard.steps.current == 'generator' %}
        {% blocktrans %}To start using a token generator, please use your
        smartphone to scan the QR code below. For example, use Google
        Authenticator. Then, enter the token generated by the app.
        {% endblocktrans %}
        <p><img class="ui small image margin-auto" src="{{ QR_URL }}" alt="QR Code" /></p>

      {% elif wizard.steps.current == 'sms' %}
        {% blocktrans %}Please enter the phone number you wish to receive the
      text messages on. This number will be validated in the next step.
      {% endblocktrans %}

      {% elif wizard.steps.current == 'call' %}
        {% blocktrans %}Please enter the phone number you wish to be called on.
      This number will be validated in the next step. {% endblocktrans %}

      {% elif wizard.steps.current == 'validation' %}
        {% if challenge_succeeded %}
          {% if device.method == 'call' %}
            {% blocktrans %}We are calling your phone right now, please enter the
          digits you hear.{% endblocktrans %}
          {% elif device.method == 'sms' %}
            {% blocktrans %}We sent you a text message, please enter the tokens we
          sent.{% endblocktrans %}
          {% endif %}
        {% else %}
          <div class="ui warning message">
            {% blocktrans %}We've
        encountered an issue with the selected authentication method. Please
        go back and verify that you entered your information correctly, try
        again, or use a different authentication method instead. If the issue
        persists, contact the site administrator.{% endblocktrans %}
          </div>
        {% endif %}

      {% elif wizard.steps.current == 'yubikey' %}
        {% blocktrans %}To identify and verify your YubiKey, please insert a
      token in the field below. Your YubiKey will be linked to your
      account.{% endblocktrans %}
      {% endif %}
    </div>
  </div>

  <form class="ui form i-tf-form" action="" method="post">{% csrf_token %}
    {% include "two_factor/_wizard_forms.html" %}

    {# hidden submit button to enable [enter] key #}
    <div style="margin-left: -9999px"><input type="submit" value=""/></div>

    {% include "two_factor/_wizard_actions.html" %}
  </form>
</div>
{% endblock %}